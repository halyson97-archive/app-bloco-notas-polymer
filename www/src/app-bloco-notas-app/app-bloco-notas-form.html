<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-form/iron-form.html">

<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../../bower_components/paper-styles/default-theme.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">

<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/iron-selector/iron-selector.html">


<dom-module id="app-bloco-notas-form">
  <template>
    <style>
      
      paper-button{
          background-color: darkslateblue;
          color: #fff;
          margin-left: 0px;
          margin-top: 1em;
        
      }
      paper-card{
        width: 100%;
        padding: 10px;
        top: 10px;
      }
      
      .buttonAdd{
        width: 100%;
      }
      paper-icon-button{
        float: right;
        color: red;
      }
    </style>

    <paper-card elevation="4" animated-shadow="false">
      
          <a name="notas" href="/notas"><paper-icon-button icon="close"></paper-icon-button></a>

        <form is="iron-form" id="form">
            <paper-input label="Titulo" id="titulo" required></paper-input>
            <paper-textarea label="Nota" rows="2" id="nota" required></paper-textarea>
            
            <paper-dropdown-menu active="true" id="categoria" label="Categoria" required>
              <paper-listbox class="dropdown-content">
                <paper-item>Simples</paper-item>
                <paper-item>Media</paper-item>
                <paper-item>Importante</paper-item>
              </paper-listbox>
          </paper-dropdown-menu>
          <div class="buttonAdd">
            <paper-button raised on-tap="submitForm"> Adicionar Nota</paper-button>
          </div>  
        </form>
     </paper-card>
    
  </template>

  <script>
    Polymer({

      is: 'app-bloco-notas-form',
      properties: {
        notas: {
          type: Array,
          notify: true,
        },
        page: {
          type: String,
          notify: true,
          reflectToAttribute: true,
          observer: '_pageChanged',
        },
      },
      listeners:{
          "iron-form-submit": "addNotas"
      },
      bir:function(){
        this.page = "notas";
        console.log("bir");
      },
      _pageChanged: function(page) {
        // Load page import on demand. Show 404 page if fails
        var resolvedPageUrl = this.resolveUrl('app-bloco-notas-' + page + '.html');
        this.importHref(resolvedPageUrl, null, this._showPage404, true);
      },
      _showPage404: function() {
        this.page = 'notas';
      },
      addNotas: function(){
          var notaObj = {
              titulo: this.$.titulo.value,
              nota: this.$.nota.value,
              categoria: this.$.categoria.value
          };

          this.push("notas", notaObj)
          // console.log("A partir do form")
          // console.log(this.notas)

          // this.$.titulo.value = "";
          // this.$.nota.value = "";
          
          // console.log(this.$.categoria);
      },
      submitForm: function () {
         this.$.form.submit();
      }
    });
  </script>
</dom-module>